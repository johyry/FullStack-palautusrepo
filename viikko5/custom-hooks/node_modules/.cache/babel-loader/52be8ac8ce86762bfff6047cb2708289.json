{"ast":null,"code":"import _regeneratorRuntime from \"/home/local/johyry/kurssit/fullStackKev\\xE4t2019/FullStack-palautusrepo/viikko5/custom-hooks/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/local/johyry/kurssit/fullStackKev\\xE4t2019/FullStack-palautusrepo/viikko5/custom-hooks/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/local/johyry/kurssit/fullStackKev\\xE4t2019/FullStack-palautusrepo/viikko5/custom-hooks/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/local/johyry/kurssit/fullStackKev\\xE4t2019/FullStack-palautusrepo/viikko5/custom-hooks/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nvar useField = function useField(type) {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  var onChange = function onChange(event) {\n    setValue(event.target.value);\n  };\n\n  return {\n    type: type,\n    value: value,\n    onChange: onChange\n  };\n};\n\nvar useResource = function useResource(baseUrl) {\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      resources = _useState4[0],\n      setResources = _useState4[1];\n\n  var getAll =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var request;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.get(baseUrl);\n\n            case 2:\n              request = _context.sent;\n              console.log(\"alldata: \" + request);\n              return _context.abrupt(\"return\", \"\");\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function getAll() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var create =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(resource) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return axios.post(baseUrl, resource);\n\n            case 2:\n              response = _context2.sent;\n              setResources(resources.concat(response.data));\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    return function create(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var service = {\n    create: create\n  };\n  return {\n    resources: resources,\n    service: service,\n    getAll: getAll\n  };\n};\n\nvar App = function App() {\n  var content = useField(\"text\");\n  var name = useField(\"text\");\n  var number = useField(\"text\");\n\n  var _useResource = useResource(\"http://localhost:3005/notes\"),\n      _useResource2 = _slicedToArray(_useResource, 2),\n      notes = _useResource2[0],\n      noteService = _useResource2[1];\n\n  var _useResource3 = useResource(\"http://localhost:3005/persons\"),\n      _useResource4 = _slicedToArray(_useResource3, 2),\n      persons = _useResource4[0],\n      personService = _useResource4[1];\n\n  console.log(noteService.resources);\n  useEffect(function () {\n    noteService.getAll().then();\n    personService.getAll().then();\n  }, []);\n\n  var handleNoteSubmit = function handleNoteSubmit(event) {\n    event.preventDefault();\n    noteService.create({\n      content: content.value\n    });\n  };\n\n  var handlePersonSubmit = function handlePersonSubmit(event) {\n    event.preventDefault();\n    personService.create({\n      name: name.value,\n      number: number.value\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"notes\"), React.createElement(\"form\", {\n    onSubmit: handleNoteSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"input\", Object.assign({}, content, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"create\")), notes.map(function (n) {\n    return React.createElement(\"p\", {\n      key: n.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, n.content);\n  }), React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"persons\"), React.createElement(\"form\", {\n    onSubmit: handlePersonSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"name \", React.createElement(\"input\", Object.assign({}, name, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  })), \" \", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }), \"number \", React.createElement(\"input\", Object.assign({}, number, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"create\")), persons.map(function (n) {\n    return React.createElement(\"p\", {\n      key: n.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, n.name, \" \", n.number);\n  }));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/local/johyry/kurssit/fullStackKev√§t2019/FullStack-palautusrepo/viikko5/custom-hooks/src/App.js"],"names":["React","useState","useEffect","axios","useField","type","value","setValue","onChange","event","target","useResource","baseUrl","resources","setResources","getAll","get","request","console","log","create","resource","post","response","concat","data","service","App","content","name","number","notes","noteService","persons","personService","then","handleNoteSubmit","preventDefault","handlePersonSubmit","map","n","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst useField = type => {\n  const [value, setValue] = useState(\"\");\n\n  const onChange = event => {\n    setValue(event.target.value);\n  };\n\n  return {\n    type,\n    value,\n    onChange\n  };\n};\n\nconst useResource = baseUrl => {\n  const [resources, setResources] = useState([]);\n\n  const getAll = async () => {\n    const request = await axios.get(baseUrl);\n    console.log(\"alldata: \" + request);\n    return \"\";\n  };\n\n  const create = async resource => {\n    const response = await axios.post(baseUrl, resource);\n    setResources(resources.concat(response.data));\n  };\n\n  const service = {\n    create\n  };\n\n  return { resources, service, getAll };\n};\n\nconst App = () => {\n  const content = useField(\"text\");\n  const name = useField(\"text\");\n  const number = useField(\"text\");\n\n  const [notes, noteService] = useResource(\"http://localhost:3005/notes\");\n  const [persons, personService] = useResource(\"http://localhost:3005/persons\");\n\n  console.log(noteService.resources);\n\n  useEffect(() => {\n    noteService.getAll().then();\n    personService.getAll().then();\n  }, []);\n\n  const handleNoteSubmit = event => {\n    event.preventDefault();\n    noteService.create({ content: content.value });\n  };\n\n  const handlePersonSubmit = event => {\n    event.preventDefault();\n    personService.create({ name: name.value, number: number.value });\n  };\n\n  return (\n    <div>\n      <h2>notes</h2>\n      <form onSubmit={handleNoteSubmit}>\n        <input {...content} />\n        <button>create</button>\n      </form>\n      {notes.map(n => (\n        <p key={n.id}>{n.content}</p>\n      ))}\n\n      <h2>persons</h2>\n      <form onSubmit={handlePersonSubmit}>\n        name <input {...name} /> <br />\n        number <input {...number} />\n        <button>create</button>\n      </form>\n      {persons.map(n => (\n        <p key={n.id}>\n          {n.name} {n.number}\n        </p>\n      ))}\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}